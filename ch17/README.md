# chap17. 用Express實作MVC

model-view-controller(MVC)，最大的優點之一，我認為是減少專案的斜升時間(ramp-up time)。熟悉PHP MVC的人可以很容易投入.NET MVC專案。程式領域中，**知道該去哪裡尋找想要的東西**並沒有那麼困難。MVC將功能分解成定義明確的領域，讓我們有一個共同框架可以開發軟體。

- model是你的資料與邏輯的"純"視圖。它完全不用理會來自使用者的互動。
- view會將model傳達給使用者。
- controller會接收使用者的輸入，操作model，並選擇要顯示哪一個view("coordinator(協調者)"比"controller(控制者)"更好的名詞:畢竟，controller聽起來不像是會接收使用者輸入的東西，而這是controller在MVC專案中的主要任務)。

MVVM，MVC的演化版本，引入一個有價值的概念：view model。view model是一種model的變形。一個簡單的view model可能會結合一個以上的model，或許多model之中的一部分，或單一model之中的一部分。它有一個非常有價值的概念：它的價值在"**保護**"model。在MVC中，修改或加強model，加入只有view需要的東西是很吸引人的(甚至是必要的)。Model view提供一個"出路"給你：如果你需要單純的顯示資料，這個view屬於view model。

如同任何模式，你必須決定它的嚴格程度為何。

## Model

model是最重要的組件。如果你的model很強健且設計良好，你一定可以拿掉展示層(或添加額外的展示層)。但使用其他的方式比較難，因為model是專案的基礎。

這一點很重要：**不要在model加入任何用來展示**，**或者與使用者互動的程式碼**。就算它看起來很簡單或很適合，我都可以保證你是為你的未來增添麻煩。更複雜的(而且有爭議的)問題是model與展示層之間的關係。

model與展示層可完全地分開，但要付出很大的代價。model的邏輯經常需要重度依賴持久保存，將兩個階層分開所產生的問題可能大於所得到的收穫。

我們這裡採用阻力最小的方式：使用Mongoose(針對MongoDB)來定義model。如果採用特定的持久技術會讓你有壓力，或許可考慮使用原生的MongoDB驅動程式(這不須任何架構或物件對應)，並將你的model從持久層分離出來。

有些人認為model應該是**只含資料**。但我不覺得這是可以提供幫助的限制，而比較喜歡將model當成資料與邏輯的結合。

建議在專案建立一個子目錄，稱為*models*來保存model。當有邏輯需要實作，或有資料需要儲存時，應該在models目錄裡面的檔案中做這件事。例如，客戶資料及邏輯放在一個稱為*models/customer.js*的檔案。

```

```